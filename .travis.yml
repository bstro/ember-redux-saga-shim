language: node_js
sudo: false
node_js:
- '5.0'
- 'stable'
branches:
  except:
  - /^v[0-9\.]+/
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
cache:
  directories:
    - node_modules
env:
  matrix:
  - EMBER_TRY_SCENARIO=ember-1-12
  - EMBER_TRY_SCENARIO=ember-1-13
  - EMBER_TRY_SCENARIO=ember-2-0
  - EMBER_TRY_SCENARIO=ember-2-1
  - EMBER_TRY_SCENARIO=ember-2-2
  - EMBER_TRY_SCENARIO=ember-2-3
  - EMBER_TRY_SCENARIO=ember-2-4
  - EMBER_TRY_SCENARIO=ember-2-5
  - EMBER_TRY_SCENARIO=ember-2-6
  - EMBER_TRY_SCENARIO=default
  - EMBER_TRY_SCENARIO=ember-release
  - EMBER_TRY_SCENARIO=ember-beta
  - EMBER_TRY_SCENARIO=ember-canary
  global:
    - CXX=g++-4.8
    - secure: mmrdjdpkVtW2i9Xvcn1iYpJqEcWymbMbAzqqbCoMPzIqmr3Gw8q3U2T9ArutqBobVKZ8rDkxKsmxQLKV6QspHw9geSZlZnE45vb7v1ZgsAzjTwsqU3oHWktjkzmTLa3PQs2PNvsCnri9Z7ubaGQ/Vj+rs4cX6lAuhS9Yu/q+Ru+YcJEfeTdR9xe/2tZrEAok6/GazXuPzRUmc+0eBrPP4NWieRoPjA455pAjBjON+9+PGEBtaiMJTXp0GYy3UwNDYKY4e7udb1G9pHvTQtnf6hi+Vgfc29qYlPlZKz7DqhEa49xZ+An1eENoozwZ172Od5L/jxsGQmGTIII4FpTkNHnh2Oo4bVB/yhpokBepgu6TF/3JeWnA+SOpZHz9QYLOeKdJI8c/V01cOy0pDeYab67LSSacMu/F5fvZWCe8CM6zw8V3r4KIA0mflsq45YkYenA4E6z5UCLlef/hhOjRXZ+YKPAizPGk1Li8hxVAbFclEbf7sPaka3l64NjJmTK4zDZ/J666artw2IZGkCRvDx6kUeOD0PTH5ypD1YtrW985hzDxAl2RM9Z/UwMpUzCYGwhVr++u2EqjAq+5lfX/ryUhUowiO1INaOoCz7B6SzWCOGX3lhdOFiBcGGRphZlDyCllnjk7RPTSQXWApSRoW/KbYKZfv/NskdvTCYfNx7E=
matrix:
  fast_finish: true
  allow_failures:
  - env: EMBER_TRY_SCENARIO=ember-beta
  - env: EMBER_TRY_SCENARIO=ember-canary
before_install:
- npm config set spin false
- npm install -g coveralls pr-bumper
- pr-bumper check
install:
- npm install
- bower install
before_script:
- "export DISPLAY=:99.0"
- "sh -e /etc/init.d/xvfb start"
- sleep 3 # give xvfb some time to start
script:
- npm run lint
- ember try:one $EMBER_TRY_SCENARIO --- ember test
after_success:
- .travis/publish-coverage.sh
before_deploy:
- pr-bumper bump
deploy:
  provider: npm
  email: npm.ciena@gmail.com
  skip_cleanup: true
  api_key:
    secure: HYs0OnBiKX/x2ZfpF30FLEq8VG6l1MqW74Wj/zjFOzeV8AuWUm9+c1vBDkkJBv1OFZbv1aTjko8nn7PbG0NZk71HASKaKN6NqSv+b8vm6+xR801aGBzS1sSqy1/RQZKoDKsOZ+zsFDVfvqmxc9e5GtCkoopoUp3X6ZsP8g4plfeG63lfqEiA0eIwZqyG96opZnLCBv02q5qnKOtetF6LD3bbFaKK2hJQF/TKX5Mignll1vku/BgFhIhuE0+Hl2BkMxspeyo3iJm8WBLAmOvZTc297PSc8f2XqsMeEhw0GDkR43Wq95J2W6rKFXWrI92docWjJgAJO2jSrEI/YGQMKQz21my9JDpWsE/eGpYbtJZMTqt/pz2uwo+39p/2An/4KfwAqoQu5JG6R2zQPr/vU4MloTqHPntAr9T/X6wrBdzk1XOOBQ0EUoFp8yoz5LZA64zfCZjKQG6Kf3MsSMK56Nqwk/bZJdZLK0KWUqyu3aK1nYV1k8XbVeNFIIJF8654p91pwUbwKBNguw0FDAWC/rIxgjSTospu5iKvflpwIOxemUlZmOXJ8kBE1FdxXYQOyQqUqkgbnEW26yxjHDDUqSdIT4NiaMbpjmx/KS2Gcpjk/76NcihVFT0QUPE3f5iWY97cio8kkck87R574pHYsDSKX+Ng515oY0Uk5CDqfqE=
  on:
    branch: master
    condition: "$EMBER_TRY_SCENARIO = 'default'"
    node: 'stable'
    tags: false
notifications:
  slack:
    secure: FeIdtSzYxdssJm4D1W9B4c++6otfZDEhGh/pUhyU28iSuUUHykq2T2s0Y4Unt6MbTVGtQEVTrtvF5hglcwCg+r0srmTTsjWIfsTyQ9rsMwMSRaf3ljl6JwIG3uNPFpUtlXFqCNedwjzIypn7jRTYEftUVL27WdxNE+6h8sWyDCrgmbXd1sGuNgpp6un0KyDGYl+kBPGmIsvLqR4n0QWN08rAg9c3RXABmFJEXmUqq4GoAMEv9De0eEeVTglawIMbP+KgVRxeEpM93/4xgmY/g9skt8UImgNLUkafpiF1g+JeSP51BK5w9j1Xh+7PSwdw5r7qpqVo9vND+/RZYShpFHNDL7NsixcqNPiY/AQvaqQqVVPn64FsU59+rxkML2PRecnYzjRw/RpD3e6fgREyz8rcQXjIiR4k73uWDJehr90zbmjj8NOlN5eyN3cMZMYth/1jXPhw6XbywbMTjX0H7/4Vtp/aJCeGh2NV4KICUkmpKjHxdF6MeIaXtpMIQCSxDuToCA75dWN88XKP+ylbFX4VQqgF+6VtxiEX5rcToo8pHwKZQc3+kvLvtsjEIdXAdLLBdKSza3TL/BxiIyS3DN/R8yJgpBokdxd1bfJLRYSdryAhqUtKN8qokiphaoOBGnKpWDlxF9h8Bu1SPv5ziWvpQ6p5bKemkNdwffSDjjw=
